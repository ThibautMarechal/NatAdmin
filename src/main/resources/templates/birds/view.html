<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="layout :: site-head">
    <title>View Post</title>
</head>

<body>

<header th:replace="layout :: site-header" ></header>
<!--
<main class="container-fluid" id="app">
	<h1>{{bird.name}}</h1>
	<p>{{bird.description}}</p>
	<ul>
		<li v-for="attribute in attributes" v-if="this.bird.attributes[attribute.key] !== undefined">
			<p>{{attribute.key}} :
				<select class="multiple-select" multiple="multiple" v-model="bird.attributes[attribute.key]">
					<option v-for="value in attribute.values" :value="value">{{value}}</option>
				</select>
			</p>
		</li>
		<li>
			<select id="newAttributeSelect">
				<option v-for="attribute in attributes" v-if="bird.attributes[attribute.key] === undefined">{{attribute.key}}</option>
			</select>
			<button class="btn btn-primary" v-on:click="addNewAttribute()">add attribute</button>
		</li>
	</ul>
	TODO BIRD PICTURE

-->
<main class="container-fluid" id="app">
	<h1>{{bird.name}}</h1>
	<p>{{bird.description}}</p>
	<ul>
		<li v-for="(value, key) in bird.attributes">
			<p>{{key}} :
				<select class="multiple-select" multiple="multiple" v-model="bird.attributes[key]">
					<template v-for="attribute in attributes" v-if="attribute.key === key">
						{{attribute}}:{{attribute.key}},{{key}}
						<option v-for="attributeValue in attribute.values" :value="attributeValue">{{attributeValue}}</option>
					</template>
				</select>
			</p>
		</li>
		<li>
			<select id="newAttributeSelect">
				<option v-for="attribute in attributes" v-if="bird.attributes[attribute.key] === undefined">{{attribute.key}}</option>
			</select>
			<button class="btn btn-primary" v-on:click="addNewAttribute()">add attribute</button>
		</li>
	</ul>
</main>
<footer th:replace="layout :: site-footer" ></footer>
<script th:replace="layout :: vueJS"></script>
<div th:replace="layout :: bottom-script"></div>
<script type="text/javascript" src="/js/selectize.js"></script>
<link rel="stylesheet" type="text/css" href="/css/selectize.css" />
<script th:inline="javascript">
	/*<![CDATA[*/
    var bird = /*[[${bird}]]*/[];
    var attributes = /*[[${attributes}]]*/[];
    new Vue({
		el: '#app',
		data: {
			bird: bird,
			attributes: attributes,
			newName: bird.name,
			newDescription: bird.description,
		},
		methods:{
		    editBird: function(){

		    },
		    enditSubmit: function(){

		    },
		    addNewAttribute: function(){
		        var newAttriuteKey = $("#newAttributeSelect option:selected").text();
		        this.$set(this.bird.attributes, newAttriuteKey, []);
		    },
		    addSelectize: function(){
				$('select').selectize({});
		    }
		},
		mounted: function(){
			this.addSelectize();
		},
		updated: function(){
			this.addSelectize();
		}
	});
    /*]]>*/
</script>
</body>
</html>